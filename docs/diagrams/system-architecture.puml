@startuml WorkReserve System Architecture

!define RECTANGLE rectangle
!define CLOUD cloud

title WorkReserve - High-Level System Architecture

' Define colors
!define FRONTEND_COLOR #E3F2FD
!define BACKEND_COLOR #F3E5F5
!define DATABASE_COLOR #E8F5E8
!define EXTERNAL_COLOR #FFF3E0
!define INFRA_COLOR #FFEBEE

' Frontend Layer
RECTANGLE "Frontend" as frontend FRONTEND_COLOR {
  RECTANGLE "React Application" as react {
    - TypeScript
    - Vite (Build Tool)
    - Tailwind CSS (Styling)
    - Framer Motion (Animations)
    - React Router (Navigation)
  }
  
  RECTANGLE "UI Components" as ui {
    - Authentication Forms
    - Room Booking Calendar
    - Payment Forms (Stripe Elements)
    - Admin Dashboard
    - User Profile Management
  }
}

' Backend Layer  
RECTANGLE "Backend Services" as backend BACKEND_COLOR {
  RECTANGLE "Spring Boot Application" as springboot {
    - Spring Security (Auth)
    - Spring Data JPA (ORM)
    - Spring Validation
    - JWT Token Management
    - RESTful APIs
  }
  
  RECTANGLE "Core Services" as services {
    - UserService (Auth, 2FA)
    - RoomService (Management)
    - ReservationService (Booking)
    - PaymentService (Stripe Integration)
    - TwoFactorService (TOTP)
    - AdminService (Analytics)
  }
  
  RECTANGLE "Caching Layer" as cache {
    - Caffeine Cache
    - Room Data
    - Time Slots
    - User Sessions
    - Availability Data
  }
}

' Database Layer
RECTANGLE "Database" as database DATABASE_COLOR {
  RECTANGLE "Primary Database" as db {
    - H2 (Development)
    - PostgreSQL (Production Ready)
    - User Management
    - Room & Time Slot Data
    - Reservations
    - Activity Logs
  }
}

' External Services
CLOUD "External Services" as external EXTERNAL_COLOR {
  RECTANGLE "Stripe API" as stripe {
    - Payment Processing
    - PaymentIntents
    - Webhooks (Planned)
  }
  
  RECTANGLE "Email Service" as email {
    - SMTP Configuration
    - Email Verification
    - Password Reset
    - Notifications
  }
  
  RECTANGLE "2FA Provider" as totp {
    - TOTP Generation
    - QR Code Creation
    - Backup Codes
  }
}

' Infrastructure Layer
CLOUD "Azure Cloud Infrastructure" as azure INFRA_COLOR {
  RECTANGLE "Azure Static Web Apps" as swa {
    - Frontend Hosting
    - CDN Distribution
    - Custom Domain
    - SSL/TLS
  }
  
  RECTANGLE "Azure App Service" as appservice {
    - Backend Hosting
    - Auto-scaling
    - Health Monitoring
    - Environment Variables
  }
  
  RECTANGLE "CI/CD Pipeline" as cicd {
    - GitHub Actions
    - Automated Testing
    - Build & Deploy
    - Environment Management
  }
}

' Connections
react --> springboot : "HTTPS/REST API"
ui --> stripe : "Stripe Elements SDK"
springboot --> db : "JPA/Hibernate"
services --> stripe : "Stripe Java SDK"
services --> email : "SMTP"
services --> totp : "TOTP Library"
springboot --> cache : "Caffeine"

' Infrastructure connections
cicd --> swa : "Deploy Frontend"
cicd --> appservice : "Deploy Backend"
swa --> react : "Hosts"
appservice --> springboot : "Hosts"

' Data flow annotations
note right of react : "User interactions,\nReal-time updates"
note right of springboot : "Business logic,\nSecurity enforcement"
note right of cache : "Performance\noptimization"
note right of db : "Persistent data\nstorage"

@enduml